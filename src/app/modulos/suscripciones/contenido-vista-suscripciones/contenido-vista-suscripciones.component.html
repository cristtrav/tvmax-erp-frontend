<a nz-button nzType="primary" routerLink="nueva">
    <i nz-icon nzType="plus"></i>
    Nueva
</a>
<ng-template #pietabla>
    <nz-space>
        <nz-space-item>
            <strong>Total:</strong>
        </nz-space-item>
        <nz-space-item>{{ total | number}}</nz-space-item>
    </nz-space>
</ng-template>
<nz-table #tbl [nzData]="lstSuscripciones" style="margin-top: 10px;" nzShowSizeChanger nzShowSizeChanger
[nzFooter]="pietabla"
[nzFrontPagination]="false"
[nzLoading]="tableLoading"
[(nzPageIndex)]="pageIndex"
[(nzPageSize)]="pageSize"
[nzTotal]="total"
(nzQueryParams)="onTableParamsChange($event)">
    <thead>
        <tr>
            <th nzWidth="60px"></th>
            <th [nzColumnKey]="'id'" [nzSortFn]="true">Código</th>
            <th *ngIf="mostrarCliente" [nzColumnKey]="'cliente'" [nzSortFn]="true" [nzSortOrder]="'ascend'">Cliente</th>
            <th [nzColumnKey]="'servicio'" [nzSortFn]="true">Servicio</th>
            <th nzAlign="center" [nzColumnKey]="'monto'" [nzSortFn]="true">Monto/mes</th>
            <th [nzColumnKey]="'estado'" [nzSortFn]="true">Estado</th>
            <th [nzColumnKey]="'cuotaspendientes'" [nzSortFn]="true">Cuotas Pend.</th>
            <th [nzColumnKey]="'deuda'" [nzSortFn]="true" nzAlign="right">Deuda</th>
            <th>Acciones</th>
        </tr>
    </thead>
    <tbody>
        <ng-container *ngFor="let s of tbl.data">
            <tr>
                <td [nzExpand]="expandSet.has(s.id?s.id:-1)" (nzExpandChange)="onExpandChange(s.id?s.id:-1, $event)"></td>
                <td>{{ s.id }}</td>
                <td *ngIf="mostrarCliente" nz-tooltip [nzTooltipTitle]="'Código: '+s.idcliente">{{ s.cliente }}</td>
                <td nz-tooltip [nzTooltipTitle]="'Código: '+s.idservicio">{{ s.servicio }}</td>
                <td nzAlign="right">{{ s.monto | number }}</td>
                <td>
                    <nz-tag [nzColor]="s.estado==='D'?'red':'green'">
                        <span *ngIf="s.estado === 'R'">Reconectado</span>
                        <span *ngIf="s.estado === 'C'">Conectado</span>
                        <span *ngIf="s.estado === 'D'">Desconectado</span>
                    </nz-tag>
                </td>
                <td>
                    <span style="font-size: large;">
                        <a nz-tooltip nzTooltipTitle="Ver cuotas de la suscripción" [routerLink]="s.id+'/cuotas'">
                            <i nz-icon nzType="eye"></i>
                        </a>
                    </span>
                    <nz-divider nzType="vertical"></nz-divider>
                    {{ s.cuotaspendientes | number }}
                </td>
                <td nzAlign="right">{{ s.deuda | number }}</td>
                <td>
                    <button nz-button nz-tooltip nzType="primary" nzTooltipTitle="Editar" [routerLink]="s.id+''">
                        <i nz-icon nzType="edit" nzTheme="outline"></i>
                    </button>
                    <nz-divider nzType="vertical"></nz-divider>
                    <button nz-button nz-tooltip nz-popconfirm nzType="primary" nzTooltipTitle="Eliminar" nzDanger
                    nzPopconfirmTitle="¿Desea eliminar la Suscripción?" nzPopconfirmPlacement="bottom" nzOkText="Eliminar"
                    (nzOnConfirm)="eliminar(s.id)">
                        <i nz-icon nzType="delete" nzTheme="outline"></i>
                    </button>
                </td>
            </tr>
            <tr [nzExpand]="expandSet.has(s.id?s.id:-1)">
                <nz-space nzSize="large">
                    <nz-space-item >
                        <strong>Dirección: </strong> {{ s.direccion }}
                    </nz-space-item>
                    <nz-space-item>
                        <strong>Fecha de Suscripción:</strong> {{ s.fechasuscripcion | date:'dd/MMMM/yyyy' }}
                    </nz-space-item>
                </nz-space>
            </tr>
        </ng-container>
    </tbody>
</nz-table>